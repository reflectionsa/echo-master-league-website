name = "eml-discord-oauth"
main = "discord-oauth.js"
compatibility_date = "2024-01-01"

# KV namespace for production signups and role cache.
# After creating: wrangler kv namespace create "EML_SIGNUPS"
# Paste the returned id below, replacing REPLACE_WITH_KV_NAMESPACE_ID
[[kv_namespaces]]
binding = "EML_SIGNUPS"
id = "b71dad6047bd4a81a9cbe884e5f26187"

[vars]
# Your Discord Application ID (not secret - safe to commit)
DISCORD_CLIENT_ID = "1477115120759996667"

# Your EML Discord server ID
# Enable Developer Mode in Discord (User Settings > Advanced > Developer Mode)
# Right-click your server name > Copy Server ID
DISCORD_GUILD_ID = "1182380144887865406"

# Comma-separated list of allowed frontend origins (no trailing slash)
ALLOWED_ORIGINS = "http://localhost:3000,https://reflectionsa.github.io"

# Static role ID â†’ name map (RECOMMENDED - no bot token needed)
# Steps to get role IDs:
#   1. Enable Developer Mode: Discord > User Settings > Advanced > Developer Mode
#   2. Open your EML server > Server Settings > Roles
#   3. Right-click each role > Copy Role ID
# Replace the placeholder IDs below with your actual role IDs.
# Keep the quotes inside the JSON string escaped.
DISCORD_ROLE_MAP = '{"1182380145084993593":"Commissioner","1209744291975405658":"Board","1182380145084993591":"League Mod","1196604058182623342":"League Mod EU","1209743670421753946":"Casters","1248390263940972596":"PlayerNA","1248628874099560498":"PlayerEU","1182380145047249000":"CaptainNA","1248402146546815030":"CoCaptainNA"}'

# Secrets (NEVER put these in this file - set via CLI):
#   wrangler secret put DISCORD_CLIENT_SECRET
#   wrangler secret put DISCORD_BOT_TOKEN   (only needed if NOT using DISCORD_ROLE_MAP)
